<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/jqueryui/jquery-ui.js"></script>
<script>
$(document).ready(function() {

    var textToSearch = $("#busca_oferta").val();
    var item = [];

    $("#busca_oferta").autocomplete({
        //source: availableTags
        source: function(request, response) {
            $.ajax({
                url: "http://localhost:8181/newOpweb/opwebServlet?opcion=autocompletar&matricula=150001&q=" + textToSearch,
                dataType: "json",

                success: function(data) {
                    //alert("success"+data.items);
                    // 	      	  var len = data.items.length;
                    // 	          for (var i = 0; i < len; i++) {
                    // 	              var obj = { name: data.items[i].label, code: data.items[i].label };
                    // 	              item.push(data.items[i].label);
                    // 	          }
                    console.log(item.length);
                    response(data.items);
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    console.log(textStatus);
                }
            });


        },
        search: function(event, ui) {
            //alert(event.target.value);
            if ($.isNumeric(event.target.value)) {
                return false;
            } else {
                //alert("no numerico");
            }

        },
        select: function(event, ui) {
            document.forms["formbusqueda"]["id"].value = (ui.item.value);
            document.forms["formbusqueda"]["isCIF"].value = false;

            //$( "#project-id" ).val( ui.item.value );
            //$( "#project-description" ).html( ui.item.desc );
            return false;
        }

    });
});
</script>
<h2>Buscar <a class="close-reveal-modal" title="Cerrar" target= "fPrincipal"><i class="fa fa-times"></i></a></h2>

<form name="formbusqueda" class="row" action="opwebServlet">
    <div class="medium-12 columns">
        <div class="row collapse postfix-round">
            <div class="medium-10 columns">
                <input type="text" id="busca_oferta" name="busca_oferta" placeholder="CIF/NOMBRE" value="">
                <input type="hidden" name="matricula" id="matricula" value="<!--matricula-->">
                <input type="hidden" name="opcion" value="ofertas">
                <input type="hidden" name="accion" value="buscar2">
                <input type="hidden" name="isCIF" value="true">
                <input type="hidden" name="res" id="res" value="<!--RES-->">
            </div>
            <div class="medium-2 columns">
                <button class="button postfix" title="Buscar" onclick="javascript:chequeaCIF();"><i class="fa fa-search fa-lg"></i></button>
            </div>
        </div>
    </div>
</form>
